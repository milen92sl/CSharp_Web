/*! blossom-spa-pro 2.0.0 2019-04-19 1:56:16 PM */

jQuery.fn.isOnScreen=function(){var a=jQuery(window),s={top:a.scrollTop(),left:a.scrollLeft()};s.right=s.left+a.width(),s.bottom=s.top+a.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(s.right<t.left||s.left>t.right||s.bottom<t.top||s.top>t.bottom)},jQuery(document).ready(function(o){if("undefined"!=typeof blossom_spa_pro_ajax){var t=parseInt(blossom_spa_pro_ajax.startPage)+1,i=parseInt(blossom_spa_pro_ajax.maxPages),l=blossom_spa_pro_ajax.nextLink,a=blossom_spa_pro_ajax.autoLoad;if("load_more"==a)(0<o(".blog").length||0<o(".search").length||0<o(".archive").length)&&(o(".pagination").before('<div class="pagination_holder" style="display: none;"></div>').after('<div id="load-posts"><a href="javascript:void(0);"><i class="fas fa-sync-alt"></i>'+blossom_spa_pro_ajax.loadmore+"</a></div>"),t==i+1&&o("#load-posts a").html('<i class="fas fa-ban"></i>'+blossom_spa_pro_ajax.nomore).addClass("disabled"),o("#load-posts a").click(function(){return t<=i&&!o(this).hasClass("loading")&&(o(this).html('<i class="fas fa-sync-alt fa-spin"></i>'+blossom_spa_pro_ajax.loading).addClass("loading"),o(".pagination_holder").load(l+" .latest_post",function(){t++;l=l.replace(/(\/?)page(\/|d=)[0-9]+/,"$1page$2"+t);var a=o(".pagination_holder").html();if(o(".pagination_holder").html(""),"masonry-layout"===blossom_spa_pro_ajax.masonry){var s=o(a).filter("article.latest_post");o(".site-main").append(s).imagesLoaded(function(){o(".site-main").masonry("appended",s)})}else o(".site-main article:last").after(a);o(".site-main").find(".entry-content").find("div").hasClass("tiled-gallery")&&o.getScript(blossom_spa_pro_ajax.plugin_url+"/jetpack/modules/tiled-gallery/tiled-gallery/tiled-gallery.js"),t<=i?o("#load-posts a").html('<i class="fas fa-sync-alt"></i>'+blossom_spa_pro_ajax.loadmore).removeClass("loading"):o("#load-posts a").html('<i class="fas fa-ban"></i>'+blossom_spa_pro_ajax.nomore).addClass("disabled").removeClass("loading")})),!1}),o(".pagination").remove());else if("infinite_scroll"==a){o(".pagination").before('<div class="pagination_holder" style="display: none;"></div>');var e=!1,s=!1;(0<o(".blog").length||0<o(".search").length||0<o(".archive").length)&&o(window).scroll(function(){e||s||o(".latest_post").last().isOnScreen()&&(t<=i?(e=!0,o(".pagination_holder").load(l+" .latest_post",function(){t++;e=!1,l=l.replace(/(\/?)page(\/|d=)[0-9]+/,"$1page$2"+t);var a=o(".pagination_holder").html();if(o(".pagination_holder").html(""),"masonry-layout"===blossom_spa_pro_ajax.masonry){var s=o(a).filter("article.latest_post");o(".site-main").append(s).imagesLoaded(function(){o(".site-main").masonry("appended",s)})}else o(".site-main article:last").after(a);o(".site-main").find(".entry-content").find("div").hasClass("tiled-gallery")&&o.getScript(blossom_spa_pro_ajax.plugin_url+"/jetpack/modules/tiled-gallery/tiled-gallery/tiled-gallery.js")})):s=!0)}),o(".pagination").remove()}o("body").on("click",".btn-simple",function(){o(this).addClass("adding-cart");var s=o(this).attr("id");o.ajax({url:blossom_spa_pro_ajax.url,type:"post",data:"action=blossom_spa_pro_add_cart_single&product_id="+s,success:function(a){o("#"+s).replaceWith(a)}})}),o("body").on("click",".bsp_ajax_like",function(){var a=o(this);id=a.attr("id").split("-").pop(),"like"===a.children().attr("class").split(" ")[1]&&o.ajax({type:"post",url:blossom_spa_pro_ajax.url,data:{action:"blossom_spa_pro_post_like",id:id},beforeSend:function(){a.addClass("loading")},success:function(a){a&&o("#like-"+id).html(a)}}).done(function(){a.removeClass("loading")})}),o(".single").on("click",".bsp_single_ajax_like",function(){var a=o(this);id=a.attr("id").split("-").pop(),"like"===a.children().attr("class").split(" ")[2]&&o.ajax({type:"post",url:blossom_spa_pro_ajax.url,data:{action:"blossom_spa_pro_post_like_single",id:id},beforeSend:function(){a.addClass("loading")},success:function(a){a&&o("#singlelike-"+id).html(a)}}).done(function(){a.removeClass("loading")})}),$i=0;var n=[];o(".tab-btn").click(function(){var a=o(this).attr("data-id"),s=o("button.tab-btn:eq(0)").attr("data-id"),t=o(this).attr("class").split(" ")[0];o(".tab-btn").removeClass("active"),o(this).addClass("active"),o(".tab-content").removeClass("active"),o("."+t+"-content").addClass("active"),-1==n.indexOf(a)&&(n[$i]=a,0==$i&&($i++,n.unshift(s)),$i++,o.ajax({type:"post",url:blossom_spa_pro_ajax.url,data:{action:"blossom_spa_pro_special_pricing_ajax_handler",data_id:a,data_class:t},beforeSend:function(){o(".tab-content").addClass("loading"),o(".tab-content:last-child").siblings().removeClass("loading")},success:function(a){a&&o(".tab-content-wrap").append(a)}}).done(function(){o(".tab-content").removeClass("loading")}))})}});